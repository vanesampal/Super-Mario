<!DOCTYPE HTML>
<html>
<head>
<title>Super-Mario</title>
<meta charset="utf-8">
<style>
body {
	margin: 0;
	padding: 0;
	background-color: #000;
}
</style>
<script src="lvl1.js"></script>
<script src="menu.js"></script>
<script src="//cdn.jsdelivr.net/phaser/2.6.2/phaser.min.js"></script>
</head>
<body>
	<script type="text/javascript">
		var game = new Phaser.Game(256, 240, Phaser.CANVAS, '',this, false, false);

		function preload() {

			//  We need this because the assets are on github pages
			//  Remove the next 2 lines if running locally
			//this.load.baseURL = 'https://vanesampal.github.io/Super-Mario/';
			//this.load.crossOrigin = 'anonymous';
		}
			var hxos;
                        var hxos2;
                        var hxos3;
			var sc=0;
			var score;
                        var lives;
                        var livescount=3;

		game.state.add('lvl1', lvl1);
		game.state.add('menu',menu);
		game.state.start('menu');


		function pipesOverlap(player,pipes){
 		if (cursors.down.isDown && (player.body.onFloor())) {
 			player.body.enable=false;
 			game.time.events.add(Phaser.Timer.SECOND*1.3 , function() {
 				player.body.enable=true;
 				player.reset(1335,170);
 		});
 	}
 }
		var pl=0;
		function coinOverlap(player, coin) {
			hxos.play();
			sc=sc+10;
			score.text='Score:'+sc;
			pl=pl+1;
			coin.kill();
			if(pl==30){
			sc=sc+1000;
			score.text='Score:'+sc;
			alert("Pires ola ta nomismata!+1000 score!!Kerdises");
			location.reload();
				}}

			function bugsOverlap(player,bugs) {
			if (player.body.touching.down) {
				bugs.animations.stop();
				bugs.frame = 2;
				bugs.body.enable = false;
				player.body.velocity.y = -80;
                                hxos2.play();
				sc=sc+10;
				score.text='Score:'+sc;
				game.time.events.add(Phaser.Timer.SECOND, function() {
					bugs.kill();
				});
			} else {
				player.frame = 6;
				player.body.enable = false;
				player.animations.stop();
                                if (livescount>1){
				hxos3.stop();
                                sc=0; 
				livescount=livescount-1;
				game.state.restart();
						}	
				else{
				alert("Exases.Thes na xanapaixeis;");
				location.reload();
				}			              
				game.time.events.add(Phaser.Timer.SECOND * 3, function() {
					game.paused = true;
				});
}}

		function goombaOverlap(player, goomba) {
			if (player.body.touching.down) {
				goomba.animations.stop();
				goomba.frame = 2;
				goomba.body.enable = false;
				player.body.velocity.y = -80;
                                hxos2.play();
				sc=sc+10;
				score.text='Score:'+sc;
				game.time.events.add(Phaser.Timer.SECOND, function() {
					goomba.kill();
				});
			} else {
				player.frame = 6;
				player.body.enable = false;
				player.animations.stop();
                                if (livescount>1){
				hxos3.stop();
                                sc=0; 
				livescount=livescount-1;
				game.state.restart();
						}	
				else{
				alert("Exases.Thes na xanapaixeis;");
				location.reload();
				}			              
				game.time.events.add(Phaser.Timer.SECOND * 3, function() {
					game.paused = true;
				});

		
			}
		}
	</script>
</body>
</html>
